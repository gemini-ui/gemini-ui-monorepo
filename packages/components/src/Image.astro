---
import "@gemini-ui-css/components/image.css";
import { classMerge } from "@gemini-ui-astro/core";

export interface Props extends astroHTML.JSX.ImgHTMLAttributes {
  caption?: boolean;
  dynamicGlow?: boolean;
}

const { caption, class: className, dynamicGlow, ...props } = Astro.props;
---

{
  caption && (
    <figure class="gx-figure">
      <img
        {...props}
        class={classMerge(
          "gx-image",
          dynamicGlow && "gx-dynamic-glow",
          className,
        )}
      />
      <figcaption class="gx-figure-caption">
        <slot />
      </figcaption>
    </figure>
  )
}

{
  !caption && (
    <img
      {...props}
      class={classMerge(
        "gx-image",
        dynamicGlow && "gx-dynamic-glow",
        className,
      )}
    />
  )
}
